ZeroClaw is running in {{ .Values.config.mode | upper }} mode.
{{- if eq .Values.config.mode "daemon" }}
  The full autonomous runtime is active (gateway + channels + heartbeat + memory).
{{- else }}
  Only the HTTP webhook server is active. Use POST /webhook to send messages.
{{- end }}

1. Get the application URL:
{{- if .Values.ingress.enabled }}
{{- range $host := .Values.ingress.hosts }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ $host.host }}{{ (index $host.paths 0).path }}
{{- end }}
{{- else if .Values.httpRoute.enabled }}
{{- if .Values.httpRoute.hostnames }}
{{- range $host := .Values.httpRoute.hostnames }}
  http://{{ $host }}/
{{- end }}
{{- else }}
  HTTPRoute {{ include "zeroclaw.fullname" . }} created. No hostnames configured; use your Gateway listener host or a matching Host header.
{{- end }}
{{- else if contains "NodePort" .Values.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "zeroclaw.fullname" . }})
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  echo http://$NODE_IP:$NODE_PORT
{{- else if contains "LoadBalancer" .Values.service.type }}
  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "zeroclaw.fullname" . }} -o jsonpath="{.status.loadBalancer.ingress[0].ip}")
  echo http://$SERVICE_IP:{{ .Values.service.port }}
{{- else }}
  kubectl --namespace {{ .Release.Namespace }} port-forward svc/{{ include "zeroclaw.fullname" . }} {{ .Values.service.port }}:{{ .Values.service.port }}
  echo http://127.0.0.1:{{ .Values.service.port }}
{{- end }}

{{- if .Values.config.requirePairing }}
2. Pairing is ENABLED. Retrieve the 6-digit code from pod logs and call POST /pair to obtain a bearer token.
{{- else }}
2. Pairing is DISABLED. The /webhook endpoint does not require a bearer token.
{{- end }}

3. Secrets:
   - API key: {{ if .Values.secret.create }}managed by Helm (secret.apiKey){{ else }}external Secret "{{ .Values.secret.existingSecret }}"{{ end }}
   {{- if include "zeroclaw.hasChannelSecrets" . }}
   - Channel secrets: {{ if .Values.channelSecrets.create }}managed by Helm (channelSecrets.*){{ else }}external Secret "{{ .Values.channelSecrets.existingSecret }}"{{ end }}
   {{- end }}

4. Configuration:
   - Provider:     {{ .Values.config.provider }}
   - Model:        {{ default "claude-sonnet-4-5-20250929" .Values.config.model }}
   - Memory:       {{ .Values.config.memory.backend }}
   - Autonomy:     {{ .Values.config.autonomy.level }}
   - Runtime:      {{ .Values.config.runtime.kind }}

{{- if eq .Values.config.mode "daemon" }}

5. Active channels:
   {{- if .Values.config.channels.telegram.enabled }}
   - Telegram (allowed: {{ join ", " .Values.config.channels.telegram.allowedUsers | default "none" }})
   {{- end }}
   {{- if .Values.config.channels.discord.enabled }}
   - Discord{{ if .Values.config.channels.discord.guildId }} (guild: {{ .Values.config.channels.discord.guildId }}){{ end }}
   {{- end }}
   {{- if .Values.config.channels.slack.enabled }}
   - Slack{{ if .Values.config.channels.slack.channelId }} (channel: {{ .Values.config.channels.slack.channelId }}){{ end }}
   {{- end }}
   {{- if .Values.config.channels.whatsapp.enabled }}
   - WhatsApp (phone: {{ .Values.config.channels.whatsapp.phoneNumberId }})
   {{- end }}
   {{- if .Values.config.channels.matrix.enabled }}
   - Matrix ({{ .Values.config.channels.matrix.homeserver }}, room: {{ .Values.config.channels.matrix.roomId }})
   {{- end }}
   {{- if .Values.config.channels.imessage.enabled }}
   - iMessage
   {{- end }}
   {{- if .Values.config.channels.irc.enabled }}
   - IRC ({{ .Values.config.channels.irc.server }}:{{ .Values.config.channels.irc.port }})
   {{- end }}
   {{- if .Values.config.channels.lark.enabled }}
   - Lark{{ if .Values.config.channels.lark.useFeishu }}/Feishu{{ end }}
   {{- end }}
   {{- if .Values.config.channels.dingtalk.enabled }}
   - DingTalk
   {{- end }}
{{- end }}
